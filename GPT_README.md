javascript:(()=>{const MIN=2;const TAB=window.name||'AR_TAB';window.name=TAB;const HUD_ID='_arHUD';function makeHUD(){let hud=document.getElementById(HUD_ID);if(!hud){hud=document.createElement('div');hud.id=HUD_ID;hud.style.cssText='position:fixed;bottom:20px;right:20px;z-index:2147483647;padding:10px 16px;background:rgba(0,0,0,.75);color:#fff;font:16px monospace;border-radius:10px;border:1px solid #fff;box-shadow:0 0 10px rgba(0,0,0,.6);cursor:pointer;user-select:none;min-width:150px;text-align:center';hud.title='Click to stop auto-refresh';document.body.appendChild(hud)}return hud}function stopAll(msg){try{window._ar_tick&&clearInterval(window._ar_tick)}catch{};try{window._ar_ctrl&&window._ar_ctrl.close()}catch{};document.getElementById(HUD_ID)?.remove();alert(msg||'Auto-refresh stopped')}const hudExisting=document.getElementById(HUD_ID);if(hudExisting){stopAll('Auto-refresh stopped');return}const hud=makeHUD();let next=Date.now()+MIN*60000;function show(){const left=Math.max(0,next-Date.now());hud.textContent='⟳ '+Math.ceil(left/1000)+'s';}function tick(){const left=next-Date.now();if(left<=0){next=Date.now()+MIN*60000;location.reload();return}show()}show();window._ar_tick=setInterval(tick,500);hud.onclick=()=>stopAll('Auto-refresh stopped'); // try persistent controller popup
let ctrl=null;try{ctrl=(window.top||window).open('about:blank',TAB+'_AR_CTRL','width=360,height=180,noopener,noreferrer')}catch(e){}if(!ctrl){hud.textContent='⟳ '+(MIN*60)+'s (no popup)';alert('Auto-refresh started (no popup). The page will refresh once every '+MIN+' min, but will NOT continue after that next reload because this site blocked the controller popup. To fully persist, allow popups for this site and click the bookmark again.');return}window._ar_ctrl=ctrl;ctrl.document.title='Auto Refresh Controller';ctrl.document.body.style.cssText='font:14px/1.4 system-ui;padding:12px';ctrl.document.body.innerHTML=`<b>Auto-refresh</b><br>Target tab: <code>${TAB}</code><br>Interval: <b>${MIN}</b> min<br><button id="stop" style="margin-top:8px;padding:6px 10px;border-radius:8px;border:1px solid #ccc;background:#f5f5f5;cursor:pointer">Stop</button><div id="status" style="margin-top:8px;opacity:.8"></div>`;const status=ctrl.document.getElementById('status');const stopBtn=ctrl.document.getElementById('stop');function schedule(){const t=ctrl.open('',TAB);if(!t||t.closed){status.textContent='Target tab not found. Closing controller…';ctrl.setTimeout(()=>ctrl.close(),800);return}let nextReload=Date.now()+MIN*60000;function hudUpdate(){try{const d=t.document;const h=d.getElementById(HUD_ID)||d.body.appendChild(Object.assign(d.createElement('div'),{id:HUD_ID}));h.style.cssText='position:fixed;bottom:20px;right:20px;z-index:2147483647;padding:10px 16px;background:rgba(0,0,0,.75);color:#fff;font:16px monospace;border-radius:10px;border:1px solid #fff;box-shadow:0 0 10px rgba(0,0,0,.6);cursor:pointer;user-select:none;min-width:150px;text-align:center';h.textContent='⟳ '+Math.ceil((nextReload-Date.now())/1000)+'s';h.onclick=()=>{stopBtn.click()}}catch(e){}ctrl.requestAnimationFrame(hudUpdate)}hudUpdate();status.textContent='Running… next reload in '+MIN+' min';return ctrl.setInterval(()=>{const tab=ctrl.open('',TAB);if(!tab||tab.closed){ctrl.clearInterval(ctrl._timer);ctrl.close();return}nextReload=Date.now()+MIN*60000;status.textContent='Reload @ '+new Date().toLocaleTimeString();tab.location.reload()},MIN*60000)}ctrl._timer=schedule();stopBtn.onclick=()=>{try{ctrl.clearInterval(ctrl._timer)}catch{};stopAll('Auto-refresh stopped');ctrl.close()};alert('Auto-refresh started: every '+MIN+' min. Click the on-page timer to stop.');})();
